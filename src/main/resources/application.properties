# ===============================================================================
# MEDIA SORTING APPLICATION CONFIGURATION
# ===============================================================================

# Main source folder for media processing
app.media-sorting.source-folder=${MEDIA_SOURCE_FOLDER:G:\\photos\\Process\\Images}

# Root directory for all log files
app.media-sorting.root-logs-folder=${ROOT_LOGS_FOLDER:logs}

# ===============================================================================
# FEATURE FLAGS
# ===============================================================================

# Enable creation of device-specific folders during organization
app.media-sorting.enable-device-folder-creation=true
app.media-sorting.enable-duplicate-moving=true
app.media-sorting.perceptual-hash.enabled=true

# Enable cross-run duplicate detection (pre-scans organized directories)
# When enabled, the application scans Images/Original and Videos/Original
# folders before processing new files to detect duplicates across multiple runs
# Performance impact: adds ~15ms per organized file (one-time per run)
app.media-sorting.enable-cross-run-duplicate-detection=true

# Directory Structure Names to separate folders
app.media-sorting.enable-duplicate-moving=${ENABLE_DUPLICATE_MOVING:true}

# ===============================================================================
# DIRECTORY STRUCTURE CONFIGURATION
# ===============================================================================

# Name of the directory where empty folders are moved
app.media-sorting.directory-structure.empty-folder-directory-name=${EMPTY_FOLDER_DIR_NAME:EmptyFolder}

# Main directory name for organizing images
app.media-sorting.directory-structure.images-directory-name=${IMAGES_DIR_NAME:Images}

# Main directory name for organizing videos
app.media-sorting.directory-structure.videos-directory-name=${VIDEOS_DIR_NAME:Videos}

# Subdirectory name for original (unique) files
app.media-sorting.directory-structure.original-sub-directory-name=${ORIGINAL_SUBDIR_NAME:Original}

# Subdirectory name for duplicate files
app.media-sorting.directory-structure.duplicate-sub-directory-name=${DUPLICATE_SUBDIR_NAME:Duplicate}

# Directory name for non-media files
app.media-sorting.directory-structure.others-directory-name=${OTHERS_DIR_NAME:others}

# ===============================================================================
# LOG FILE PATHS CONFIGURATION
# Note: These paths are relative to the run-specific directory (logs/run_TIMESTAMP/)
# ===============================================================================

# Log file for image processing errors
app.media-sorting.log-file-paths.image-error-log-path=${IMAGE_ERROR_LOG:image-error.txt}

# Log file for general media processing errors
app.media-sorting.log-file-paths.media-error-log-path=${MEDIA_ERROR_LOG:media-error.txt}

# Log file for photo organizer errors
app.media-sorting.log-file-paths.photo-organizer-error-log-path=${PHOTO_ORGANIZER_ERROR_LOG:photo-organizer-error.txt}

# Log file for file comparison operations
app.media-sorting.log-file-paths.file-comparison-log-path=${FILE_COMPARISON_LOG:file-compare.txt}

# Log file for empty folder cleanup operations
app.media-sorting.log-file-paths.empty-folder-cleanup-log-path=${EMPTY_FOLDER_CLEANUP_LOG:cleanup-empty-folders.txt}

# Log file for folder comparison progress
app.media-sorting.log-file-paths.folder-comparison-progress-log-path=${FOLDER_COMPARISON_PROGRESS_LOG:folder-compare-progress.txt}

# Video error logs - grouped in video/ subfolder since there are multiple related files
app.media-sorting.log-file-paths.video-error-log-path=${VIDEO_ERROR_LOG:video/error.txt}
app.media-sorting.log-file-paths.video-mp4-error-log-path=${VIDEO_MP4_ERROR_LOG:video/mp4Error.txt}
app.media-sorting.log-file-paths.video-tgp-error-log-path=${VIDEO_TGP_ERROR_LOG:video/tgpError.txt}
app.media-sorting.log-file-paths.video-qt-error-log-path=${VIDEO_QT_ERROR_LOG:video/qtError.txt}
app.media-sorting.log-file-paths.video-other-error-log-path=${VIDEO_OTHER_ERROR_LOG:video/otherError.txt}

# ===============================================================================
# SUPPORTED FILE EXTENSIONS CONFIGURATION
# ===============================================================================

# Supported image file extensions (comma-separated, case-insensitive)
app.media-sorting.file-extensions.supported-image-extensions=${SUPPORTED_IMAGE_EXTENSIONS:arw,jpg,jpeg,gif,bmp,ico,tif,tiff,raw,indd,ai,eps,pdf,heic,cr2,nrw,k25,png,webp}

# Supported video file extensions (comma-separated, case-insensitive)  
app.media-sorting.file-extensions.supported-video-extensions=${SUPPORTED_VIDEO_EXTENSIONS:mp4,mkv,flv,avi,mov,wmv,rm,mpg,mpeg,3gp,vob,m4v,3g2,divx,xvid,webm}

# ===============================================================================
# BATCH JOB CONFIGURATION FOR FOLDER COMPARISON
# ===============================================================================

# # Primary folder path for batch comparison (typically the source folder)
# app.media-sorting.batch-job.primary-folder-path=${BATCH_PRIMARY_FOLDER:E:\\Photos\\Images}

# # Secondary folder path for batch comparison (typically the target folder)
# app.media-sorting.batch-job.secondary-folder-path=${BATCH_SECONDARY_FOLDER:E:\\Marriage}

# Maximum number of threads for parallel processing during batch comparison
app.media-sorting.batch-job.max-thread-pool-size=${BATCH_MAX_THREADS:20}

# Directory path for storing batch comparison logs
app.media-sorting.batch-job.comparison-logs-directory-path=${BATCH_COMPARISON_LOGS_DIR:logs/compare}

# ===============================================================================
# SPRING BOOT LOGGING CONFIGURATION
# ===============================================================================

# Set logging level for the media sorting application
logging.level.com.media.sort=${APP_LOG_LEVEL:INFO}

# Console logging pattern
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n

# File logging pattern (when file logging is enabled)
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# ===============================================================================
# SPRING BOOT APPLICATION SETTINGS
# ===============================================================================

# Application name
spring.application.name=Media Sorting Application

# Enable configuration properties validation
spring.main.allow-bean-definition-overriding=true

# ===============================================================================
# BATCH MODE CONFIGURATION - Exit after job completion
# ===============================================================================

# Disable web server (run as batch job only)
spring.main.web-application-type=none

# Exit application after batch job completes
spring.batch.job.enabled=true

# ===============================================================================
# SPRING BATCH CONFIGURATION
# ===============================================================================

# Enable batch job execution on startup
spring.batch.job.enabled=true

# H2 Database configuration for Spring Batch metadata
spring.datasource.url=jdbc:h2:mem:batchdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=

# Initialize Spring Batch schema automatically
spring.batch.jdbc.initialize-schema=always

# Batch processing configuration
spring.batch.job.chunk-size=${BATCH_CHUNK_SIZE:10}
spring.batch.jdbc.initialize-schema=always

# Enable H2 console for debugging (optional, disable in production)
spring.h2.console.enabled=${H2_CONSOLE_ENABLED:false}
spring.h2.console.path=/h2-console# ===============================================================================
# MEDIA SORTING ENHANCED FEATURES CONFIGURATION
# ===============================================================================
# This file contains ALL configuration for enhanced features.
# NO HARDCODED VALUES - everything is configurable here.
# ===============================================================================

# ===============================================================================
# TRANSACTION LOG & UNDO CONFIGURATION
# ===============================================================================
# Purpose: Records all file operations for undo capability
# Used by: TransactionLog.java, UndoService.java

# Directory where transaction logs are stored (relative to base directory)
# Each session creates a JSON file: transactions/{session-id}.json
media.transaction-log.directory=transactions

# Auto-save frequency - save transaction log every N operations
# Lower = more frequent saves (safer but slower)
# Higher = less frequent saves (faster but more loss risk)
# Recommended: 10-50
media.transaction-log.auto-save-count=10

# ===============================================================================
# CHECKPOINT & RESUME CONFIGURATION
# ===============================================================================
# Purpose: Enables resuming processing after interruption
# Used by: CheckpointService.java

# Checkpoint filename (stored in base directory)
# Contains list of processed files to skip on resume
media.checkpoint.filename=checkpoint.json

# Save checkpoint every N files processed
# Lower = more frequent checkpoints (safer but slower)
# Higher = less frequent checkpoints (faster but more replay needed)
# Recommended: 50-200
media.checkpoint.save-frequency=100

# ===============================================================================
# REPORTING CONFIGURATION
# ===============================================================================
# Purpose: Generate processing reports in multiple formats
# Used by: ReportingService.java, ReportGeneratorService.java

# Directory where reports are saved (relative to base directory)
# Reports include: report_YYYY-MM-DD_HHmmss.{txt,json,html,csv}
media.reporting.directory=reports

# Report separator character (for console output)
# Used to draw lines in console: ===============
media.reporting.separator-char==

# Report separator length (number of characters)
# Used to draw lines in console
media.reporting.separator-length=80

# Enable JSON report generation
media.reporting.generate-json=true

# Enable HTML report generation
media.reporting.generate-html=true

# Enable CSV report generation
media.reporting.generate-csv=true

# Enable text report generation (console + file)
media.reporting.generate-text=true

# ===============================================================================
# SPECIAL FOLDERS CONFIGURATION (ERROR HANDLING)
# ===============================================================================
# Purpose: Route problematic files to special folders instead of failing
# Used by: MediaFileWriter.java (during integration)

# Prefix for all special folders (underscore makes them sort first)
media.special-folders.prefix=_

# Folder for files with no date found
# Path: {base-dir}/{prefix}NoDateFound/
media.special-folders.no-date=NoDateFound

# Folder for files with corrupt EXIF data
# Path: {base-dir}/{prefix}CorruptEXIF/
media.special-folders.corrupt-exif=CorruptEXIF

# Folder for files requiring manual review (suspicious dates, etc.)
# Path: {base-dir}/{prefix}ManualReviewRequired/
media.special-folders.manual-review=ManualReviewRequired

# Folder for unsupported file formats
# Path: {base-dir}/{prefix}UnsupportedFormat/
media.special-folders.unsupported-format=UnsupportedFormat

# ===============================================================================
# EXIF CACHE CONFIGURATION
# ===============================================================================
# Purpose: Cache EXIF data to avoid re-reading unchanged files
# Used by: ExifCacheService.java

# Enable EXIF caching (set to false to disable)
media.cache.enabled=true

# Maximum number of cache entries (LRU eviction when exceeded)
# Recommended: 5000-50000 depending on memory
media.cache.max-entries=10000

# Cache entry TTL (time-to-live) in hours
# Entries older than this are considered stale
# Recommended: 24-168 (1-7 days)
media.cache.ttl-hours=24

# ===============================================================================
# FOLDER PATTERN CONFIGURATION
# ===============================================================================
# Purpose: Define dynamic folder structure using tokens
# Used by: FolderPatternResolver.java
# Supported tokens: {year}, {month}, {day}, {year-month}, {year-month-day},
#                  {device}, {extension}, {location}, {owner}

# Folder pattern template
# Example patterns:
#   {year}/{year-month}/{device}/{extension}
#   {year-month-day}/{extension}
#   {year}/{owner}/{device}/{extension}
media.folder-pattern={year}/{year-month}/{device}/{extension}

# Unknown placeholder value (when token data unavailable)
# Used when device, location, or owner cannot be determined
media.folder-pattern.unknown-value=Unknown

# ===============================================================================
# DATE STRATEGY CONFIGURATION
# ===============================================================================
# Purpose: Control how dates are selected for folder naming
# Used by: MediaSortingConfig.java, FolderPatternResolver.java
# Options: EXIF_ONLY, FILESYSTEM_FALLBACK, GPS_PREFERRED, SMART_VALIDATION

media.date-strategy=GPS_PREFERRED

# Date validation - minimum year
# Files with dates before this year are flagged for manual review
media.date-validation.min-year=2000

# Date validation - maximum year
# Files with dates after this year are flagged for manual review
# Use 0 for current year + 1
media.date-validation.max-year=2030

# ===============================================================================
# DUPLICATE STRATEGY CONFIGURATION
# ===============================================================================
# Purpose: Control how duplicates are handled
# Used by: MediaSortingConfig.java, FileQualityComparator.java
# Options: KEEP_LARGEST, KEEP_OLDEST, KEEP_NEWEST, KEEP_BOTH, ASK_USER

media.duplicate-strategy=KEEP_LARGEST

# Resolution comparison threshold
# If resolution difference is less than this percentage, consider equal
# Value: 0.0 to 1.0 (0.05 = 5%)
media.duplicate.resolution-threshold=0.05

# ===============================================================================
# PARALLEL PROCESSING CONFIGURATION
# ===============================================================================
# Purpose: Enable multi-threaded processing for performance
# Used by: ParallelProcessingConfig.java

# Enable parallel processing (true/false)
media.processing.parallel=true

# Number of threads for parallel processing
# 0 = auto-detect (use CPU core count)
# Recommended: CPU cores or CPU cores - 1
media.processing.threads=8

# Batch size for Spring Batch chunks
# Number of files processed in each transaction
# Recommended: 50-200
media.processing.batch-size=100

# Thread pool queue capacity
# Maximum number of tasks waiting for processing
# Recommended: batch-size * 2
media.processing.queue-capacity=200

# Thread shutdown timeout (seconds)
# How long to wait for threads to finish on shutdown
media.processing.shutdown-timeout=60

# ===============================================================================
# BURST DETECTION CONFIGURATION
# ===============================================================================
# Purpose: Identify burst photo sequences to avoid marking as duplicates
# Used by: DuplicatePatternUtils.java

# Enable burst detection
media.burst-detection.enabled=true

# Maximum time difference between burst photos (seconds)
# Photos taken within this time are considered burst sequence
# Recommended: 5-10 seconds
media.burst-detection.max-time-diff-seconds=5

# ===============================================================================
# RAW+JPEG PAIRING CONFIGURATION
# ===============================================================================
# Purpose: Keep RAW and JPEG pairs together
# Used by: DuplicatePatternUtils.java

# Enable RAW+JPEG pairing
media.raw-jpeg-pairing.enabled=true

# Supported RAW extensions (comma-separated, case-insensitive)
# Common formats: CR2, ARW, NEF, DNG, ORF, RAF, RW2, PEF, SRW, 3FR
media.raw-jpeg-pairing.raw-extensions=cr2,arw,nef,dng,orf,raf,rw2,pef,srw,3fr

# ===============================================================================
# CLI COMMAND CONFIGURATION
# ===============================================================================
# Purpose: Control CLI command behavior
# Used by: CLICommandHandler.java

# Enable undo command
media.cli.undo-enabled=true

# Enable list-sessions command
media.cli.list-sessions-enabled=true

# Require confirmation for undo (set false for batch mode)
media.cli.undo-require-confirmation=false

# ===============================================================================
# GEOCODING CONFIGURATION (OPTIONAL - FUTURE FEATURE)
# ===============================================================================
# Purpose: Reverse geocode GPS coordinates to location names
# Used by: GeocodingService.java (when implemented)

# Enable geocoding
media.geocoding.enabled=false

# Geocoding provider (NOMINATIM or GOOGLE_MAPS)
media.geocoding.provider=NOMINATIM

# API key for Google Maps (if using GOOGLE_MAPS provider)
media.geocoding.api-key=

# Enable geocoding cache
media.geocoding.cache-enabled=true

# Rate limit between API calls (milliseconds)
# Nominatim requires 1000ms, Google Maps allows faster
media.geocoding.rate-limit-ms=1000

# ===============================================================================
# PERCEPTUAL HASHING CONFIGURATION (OPTIONAL - FUTURE FEATURE)
# ===============================================================================
# Purpose: Detect visually similar images
# Used by: PerceptualHashService.java (when JImageHash dependency resolved)

# Enable perceptual hashing
media.perceptual-hash.enabled=false

# Similarity threshold (0.0 to 1.0)
# Higher = more strict (only very similar images)
# Lower = more lenient (detect more duplicates)
# Recommended: 0.90-0.95
media.perceptual-hash.threshold=0.95

# Hashing algorithm (PHASH, DHASH, AVERAGE_HASH)
# PHASH = most accurate but slower
# DHASH = good balance
# AVERAGE_HASH = fastest but less accurate
media.perceptual-hash.algorithm=PHASH

# ===============================================================================
# LOGGING CONFIGURATION FOR ENHANCED FEATURES
# ===============================================================================
# Purpose: Control logging verbosity for new features

# Log level for transaction log operations
logging.level.com.media.sort.service.TransactionLog=INFO

# Log level for undo operations
logging.level.com.media.sort.service.UndoService=INFO

# Log level for reporting
logging.level.com.media.sort.service.ReportingService=INFO

# Log level for caching
logging.level.com.media.sort.service.ExifCacheService=INFO

# Log level for checkpoint service
logging.level.com.media.sort.service.CheckpointService=INFO

# ===============================================================================
# NOTES & BEST PRACTICES
# ===============================================================================
# 
# 1. TRANSACTION LOG:
#    - Increase auto-save-count for better performance
#    - Decrease for more safety (less replay on crash)
#
# 2. CHECKPOINT:
#    - Save-frequency should balance safety vs performance
#    - Too frequent = slower processing
#    - Too infrequent = more files to replay on resume
#
# 3. CACHING:
#    - Increase max-entries if you have more memory
#    - Decrease if running low on memory
#    - TTL should be long enough for re-runs but not too stale
#
# 4. PARALLEL PROCESSING:
#    - Don't set threads higher than CPU cores
#    - Leave 1-2 cores free for system operations
#    - Increase batch-size for better throughput
#
# 5. FOLDER PATTERNS:
#    - Use simple patterns for better organization
#    - Avoid too many nesting levels (max 4-5)
#
# ===============================================================================
